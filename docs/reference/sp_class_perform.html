<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>[.!] Compare spectra of groups at each wavelength � sp_class_perform • spHelper</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  	<link rel="icon" href="../favicon.png" />
</head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">spHelper | R package</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/v1_spHelper_Plotting.html">`spHelper` Plotting Examples</a>
    </li>
    <li>
      <a href="../articles/v2_Other_Examples.html">Other `spHelper` examples</a>
    </li>
    <li>
      <a href="../articles/v3_Plotting_Examples_gg_hy.html">`hyperSpec` Plotting Examples with `ggplot2`</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/GegznaV/spHelper">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>[.!] Compare spectra of groups at each wavelength</h1>
    </div>

    
    <p>Compare spectra of each pair of indicated groups at each wavelength.</p>
    

    <pre class="usage"><span class='fu'>sp_class_perform</span>(<span class='no'>sp</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='fu'>stop</span>(<span class='st'>"Parameter 'by' is missing."</span>),
  <span class='kw'>measure</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"auc"</span>, <span class='st'>"bac"</span>, <span class='st'>"j"</span>, <span class='st'>"sesp"</span>, <span class='st'>"tpr"</span>))

<span class='fu'>sp_class_perform_cv</span>(<span class='no'>sp</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='fu'>stop</span>(<span class='st'>"Parameter 'by' is not specified."</span>),
  <span class='kw'>measure</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"sesp"</span>, <span class='st'>"j"</span>, <span class='st'>"tpr"</span>)[<span class='fl'>1</span>], <span class='kw'>cvo</span> <span class='kw'>=</span> <span class='fu'><a href='cvo_create_folds.html'>cvo_create_folds</a></span>(<span class='no'>sp</span>, <span class='no'>by</span>, <span class='no'>seeds</span>),
  <span class='kw'>seeds</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>sp_test</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='co'># S3 method for sp_class_perform_cv</span>
<span class='fu'>print</span>(<span class='no'>obj</span>)

<span class='co'># S3 method for sp_classif_performance</span>
<span class='fu'>print</span>(<span class='no'>obj</span>)

<span class='co'># S3 method for sp_classif_performance</span>
<span class='fu'>predict</span>(<span class='no'>object</span>, <span class='no'>newdata</span>, <span class='kw'>what</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"values"</span>,
  <span class='st'>"performance"</span>), <span class='no'>...</span>)

<span class='fu'>sp_classification_performance</span>(<span class='no'>sp</span>,
  <span class='kw'>by</span> <span class='kw'>=</span> <span class='fu'>stop</span>(<span class='st'>"Parameter 'by' is not specified."</span>), <span class='kw'>measure</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"sesp"</span>, <span class='st'>"j"</span>,
  <span class='st'>"tpr"</span>)[<span class='fl'>1</span>], <span class='kw'>cvo</span> <span class='kw'>=</span> <span class='fu'><a href='cvo_create_folds.html'>cvo_create_folds</a></span>(<span class='no'>sp</span>, <span class='no'>by</span>, <span class='no'>seeds</span>), <span class='kw'>seeds</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='fu'>sp_compare_gr_wl</span>(<span class='no'>sp</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='fu'>stop</span>(<span class='st'>"Parameter 'by' is missing."</span>),
  <span class='kw'>measure</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"auc"</span>, <span class='st'>"j"</span>, <span class='st'>"sesp"</span>, <span class='st'>"tpr"</span>), <span class='no'>...</span>)

<span class='fu'>class_perform_sp</span>(<span class='no'>sp</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='fu'>stop</span>(<span class='st'>"Parameter 'by' is missing."</span>),
  <span class='kw'>measure</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"auc"</span>, <span class='st'>"j"</span>, <span class='st'>"sesp"</span>, <span class='st'>"tpr"</span>), <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>sp</th>
      <td><p><code>hyperSpec</code> object.</p></td>
    </tr>
    <tr>
      <th>by</th>
      <td><p>A vector (factor variable) with indicated groups for each case:
either variable name inside the object <code>sp</code>, or a vector
of length <code>nrow(sp)</code>.</p></td>
    </tr>
    <tr>
      <th>measure</th>
      <td><p>string with measure of classification performance. Currently
 available options:
"auc"   - AUC (default) area under the ROC curve;
"j"     - Youden's index;
"bac"   - Balanced accuracy (mean of Sensitivity (Se) and Specificity (Sp)).

"sesp"  - [DEPRECATED!] The same as "bac";
"tpr"   - [DEPRECATED!] The same as "bac";
"kappa" - [SLOW, DO NOT USE IT] Cohen's kappa.</p></td>
    </tr>
    <tr>
      <th>cvo</th>
      <td><p>a cross-validation object (cvo), created with function
<code><a href='cvo_create_folds.html'>cvo_create_folds</a></code>,<code><a href='http://www.rdocumentation.org/packages/caret/topics/createDataPartition'>createFolds</a></code>
or similar.</p></td>
    </tr>
    <tr>
      <th>seeds</th>
      <td><p>(vector of integers | <code>NULL</code>) Seeds for random number
            generator for each repetition.
            If <code>seeds = NULL</code> random seeds are generated.
            If number of repetitions is
            greater than number of provided seeds, random seeds are
            generated and added to the provided ones. The first seed will
            be used to ensure reproducibility of the randomly generated
            seeds.</p>
<p>(See <code><a href='http://www.rdocumentation.org/packages/base/topics/Random'>set.seed</a></code> for more information about
             random number generation).</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Fields of <code>sp_classif_performance</code> object:</p>
<p><b>type</b> type of data used ("Training data");
 <b>performance</b> - <code>hyperSepc</code> object with performance estimates;
 <b>cutoffs</b> - <code>hyperSepc</code> object with estimates of critical values
                   (cut-off points);
 <b>means</b> - <code>hyperSepc</code> object with means of each compared group;
 <b>means.description</b> - type of those means
                            ("10% trimmed mean (of each group)");
 <b>compared_by_var</b> - variable name, that was used for grouping; 
 <b>measure</b>- measure of performance.</p>
<p>Fields of <code>sp_class_perform_cv</code> object:</p>
<p><b>data</b> - a <code>hyperSpec</code> object with data used in calculations; 
 <b>cvo</b> - cross-validation object used for analysis;  
 <b>train_performance</b> - performance estimates of training datasets for each repetition and fold; 
 <b>test_performance</b> - performance estimates of testing datasets for each repetition and fold; 
 <b>cutoffs</b> - estimates of cut-off values for each repetition and fold;
 <b>obj</b> - a list of <code>sp_classif_performance</code> objects for each repetition and fold;</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p>Other <span class="pkg">spHelper</span> functions for spectroscopy and <span class="pkg">hyperSpec</span>: <code><a href='IQR_outliers.html'>IQR_outliers</a></code>,
  <code><a href='binning.html'>binning</a></code>, <code><a href='file.html'>file</a></code>,
  <code><a href='gapDer.html'>gapDer</a></code>, <code><a href='hy2mat.html'>hy2mat</a></code>,
  <code><a href='hyAdd_Label_wl.html'>hyAdd_Label_wl</a></code>,
  <code><a href='hyAdd_Labels_PAP_PD_2014.html'>hyAdd_Labels_PAP_PD_2014</a></code>,
  <code><a href='hyAdd_Labels_TD2009.html'>hyAdd_Labels_TD2009</a></code>, <code><a href='hyAdd.html'>hyAdd</a></code>,
  <code><a href='hyDrop_NA.html'>hyDrop_NA</a></code>, <code><a href='hyGet_palette.html'>hyGet_palette</a></code>,
  <code><a href='hyAdd_color.html'>hyRm_palette</a></code>, <code><a href='mad_outliers.html'>mad_outliers</a></code>,
  <code><a href='mean_Nsd.html'>mean_Nsd</a></code>, <code><a href='median_Nmad.html'>median_Nmad</a></code>,
  <code><a href='plot_hyPalette.html'>plot_hyPalette</a></code>,
  <code><a href='prepare_PAP_RK_2014__MATLAB_failui.html'>prepare_PAP_RK_2014__MATLAB_failui</a></code>,
  <code><a href='read.OOIBase32.html'>read.OOIBase32</a></code>,
  <code><a href='read.OceanView.header.html'>read.OceanView.header</a></code>,
  <code><a href='read.OceanView.html'>read.OceanView</a></code>, <code><a href='read.sp.csv2.html'>read.sp.csv2</a></code>,
  <code><a href='read3csv2hy.html'>read3csv2hy</a></code>, <code><a href='replace_spc.html'>replace_spc</a></code>,
  <code><a href='sd_outliers.html'>sd_outliers</a></code>, <code><a href='spStat.html'>spStat</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>library</span>(<span class='no'>spHelper</span>)
<span class='fu'>library</span>(<span class='no'>spPlot</span>)
<span class='fu'>library</span>(<span class='no'>ROCR</span>)

<span class='no'>sp</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='sp_filter.html'>sp_filter</a></span>(<span class='no'>Spectra2</span>)

<span class='co'># Default measure of performace is AUC:</span>
<span class='no'>sp_compared</span> <span class='kw'>&lt;-</span> <span class='fu'>sp_class_perform</span>(<span class='no'>sp</span>, <span class='st'>"class"</span>)

<span class='no'>sp_compared</span> <span class='kw'>&lt;-</span> <span class='fu'>sp_class_perform</span>(<span class='no'>sp</span>, <span class='st'>"class"</span>, <span class='kw'>measure</span> <span class='kw'>=</span> <span class='st'>"bac"</span>)

<span class='fu'>names</span>(<span class='no'>sp_compared</span>)</div><div class='output co'>#&gt; [1] "type"              "performance"       "cutoffs"          
#&gt; [4] "means"             "means.description" "compared_by_var"  
#&gt; [7] "measure"          </div><div class='input'>  <span class='co'>##  [1] "type"   "performance"  "cutoffs"  "means"</span>
  <span class='co'>##  [5] "means.description" "compared_by_var"   "measure"</span>

<span class='no'>sp_compared</span>$<span class='no'>performance</span></div><div class='output co'>#&gt; hyperSpec object
#&gt;    6 spectra
#&gt;    5 data columns
#&gt;    501 data points / spectrum
#&gt; wavelength: lambda/nm [integer] 300 301 ... 800 
#&gt; data:  (6 rows x 5 columns)
#&gt;    1. spc: Balanced accuracy [matrix501] 0.6266667 0.7447368 ... 0.6031992 
#&gt;    2. type:  [character] Balanced accuracy Balanced accuracy ... Balanced accuracy 
#&gt;    3. Compared: Compared groups [character] K vs. l K vs. N ... N vs. S1 
#&gt;    4. Compared_1: Compared group 1 [character] K K ... N 
#&gt;    5. Compared_2: Compared group 2 [character] l N ... S1 </div><div class='input'>
  <span class='co'>##  hyperSpec object</span>
  <span class='co'>##     6 spectra</span>
  <span class='co'>##     2 data columns</span>
  <span class='co'>##     501 data points / spectrum</span>
  <span class='co'>##  wavelength: lambda/nm [integer] 300 301 ... 800</span>
  <span class='co'>##  data:  (6 rows x 2 columns)</span>
  <span class='co'>##     1. spc: Mean of Se and Sp [matrix501] 0.6266667 0.7310526 ... 0.5763674</span>
  <span class='co'>##     2. Compared: Compared groups [character] K vs. l K vs. N ... N vs. S1</span>

<span class='no'>sp_compared</span>$<span class='no'>cutoffs</span></div><div class='output co'>#&gt; hyperSpec object
#&gt;    6 spectra
#&gt;    5 data columns
#&gt;    501 data points / spectrum
#&gt; wavelength: lambda/nm [integer] 300 301 ... 800 
#&gt; data:  (6 rows x 5 columns)
#&gt;    1. spc: Cut-offs [matrix501] 162.4586 150.1790 ... 15.36694 
#&gt;    2. type: type [character] Cut-offs Cut-offs ... Cut-offs 
#&gt;    3. Compared: Compared groups [character] K vs. l K vs. N ... N vs. S1 
#&gt;    4. Compared_1: Compared group 1 [character] K K ... N 
#&gt;    5. Compared_2: Compared group 2 [character] l N ... S1 </div><div class='input'>
  <span class='co'>##  hyperSpec object</span>
  <span class='co'>##     6 spectra</span>
  <span class='co'>##     2 data columns</span>
  <span class='co'>##     501 data points / spectrum</span>
  <span class='co'>##  wavelength: lambda/nm [integer] 300 301 ... 800</span>
  <span class='co'>##  data:  (6 rows x 2 columns)</span>
  <span class='co'>##     1. spc: Cut-offs [matrix501] 162.3499 151.5054 ... 19.60151</span>
  <span class='co'>##     2. Compared: Compared groups [character] K vs. l K vs. N ... N vs. S1</span>


<span class='fu'>theme_set</span>(<span class='fu'>theme_bw</span>())
<span class='fu'>ggplot</span>(<span class='no'>sp_compared</span>$<span class='no'>performance</span>, <span class='fu'>aes</span>(<span class='kw'>color</span> <span class='kw'>=</span> <span class='no'>Compared</span>)) + <span class='fu'>geom_line</span>()</div><div class='img'><img src='sp_class_perform-4.png' alt='' width='700' height='432.632880098887' /></div><div class='input'>
<span class='fu'>ggplot</span>(<span class='no'>sp_compared</span>$<span class='no'>cutoffs</span>, <span class='fu'>aes</span>(<span class='kw'>color</span> <span class='kw'>=</span> <span class='no'>Compared</span>)) + <span class='fu'>geom_line</span>()</div><div class='img'><img src='sp_class_perform-5.png' alt='' width='700' height='432.632880098887' /></div><div class='input'>
<span class='fu'><a href='qplot_kSp.html'>qplot_sp</a></span>(<span class='no'>sp_compared</span>$<span class='no'>performance</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='st'>"Compared"</span>) + <span class='fu'><a href='http://www.rdocumentation.org/packages/spPlot/topics/ggLims'>set_ggLims</a></span>(<span class='fu'>c</span>(<span class='fl'>.45</span>,<span class='fl'>1</span>),<span class='st'>"y"</span>)</div><div class='img'><img src='sp_class_perform-6.png' alt='' width='700' height='432.632880098887' /></div><div class='input'>

<span class='co'># ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>

<span class='no'>Sp2</span> <span class='kw'>&lt;-</span> <span class='no'>Spectra2</span>[,,<span class='fl'>500</span>~<span class='fl'>510</span>]
<span class='no'>sp_compared_cv</span> <span class='kw'>&lt;-</span> <span class='fu'>sp_class_perform_cv</span>(<span class='no'>Sp2</span>, <span class='st'>"class"</span>)

<span class='fu'>names</span>(<span class='no'>sp_compared_cv</span>)</div><div class='output co'>#&gt; [1] "data"              "cvo"               "train_performance"
#&gt; [4] "test_performance"  "cutoffs"           "obj"              </div><div class='input'>  ## [1] "data"              "cvo"      "train_performance"
  ## [4] "test_performance"  "cutoffs"  "obj"

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
</div># NOT RUN {
\donttest{
rez <- sp_class_perform_cv(sp = Spectra2, by = "gr")

rez
}
# }
<div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Vilmantas Gegzna

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Vilmantas Gegzna.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
