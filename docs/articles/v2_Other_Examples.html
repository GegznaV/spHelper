<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Other <code>spHelper</code> examples • spHelper</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
	<link rel="icon" href="../favicon.png" />
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">spHelper | R package</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/v1_spHelper_Plotting.html">`spHelper` Plotting Examples</a>
    </li>
    <li>
      <a href="../articles/v2_Other_Examples.html">Other `spHelper` examples</a>
    </li>
    <li>
      <a href="../articles/v3_Plotting_Examples_gg_hy.html">`hyperSpec` Plotting Examples with `ggplot2`</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/GegznaV/spHelper">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Other <code>spHelper</code> examples</h1>
            <h3 class="subtitle">(spHelper v0.1.179)</h3>
                        <h4 class="author">Vilmantas Gegzna</h4>
            
            <h4 class="date">2017-07-23</h4>
          </div>

    
    
<div class="contents">
<p>Load packages</p>
<div id="regular-expressions-regexp2df" class="section level1">
<h1 class="hasAnchor">
<a href="#regular-expressions-regexp2df" class="anchor"></a>Regular expressions <code>regexp2df</code>
</h1>
<p>Some simple examples</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">text1     &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"_A"</span>,<span class="st">"_Bee"</span>,<span class="st">"_CE"</span>,<span class="st">"_D"</span>)
pattern1A &lt;-<span class="st"> '_(?&lt;letter&gt;.)'</span>  <span class="co"># captures only the first symbol</span>
<span class="kw">regexp2df</span>(text1, pattern1A)</code></pre></div>
<pre><code>#&gt;   letter
#&gt; 1      A
#&gt; 2      B
#&gt; 3      C
#&gt; 4      D</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pattern1B &lt;-<span class="st"> '_(?&lt;word&gt;.*)'</span>   <span class="co"># captures all symbols</span>
<span class="kw">regexp2df</span>(text1, pattern1B)</code></pre></div>
<pre><code>#&gt;   word
#&gt; 1    A
#&gt; 2  Bee
#&gt; 3   CE
#&gt; 4    D</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">text2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"A_111  B_aaa"</span>,
           <span class="st">"A_222  B_bbb"</span>,
           <span class="st">"A_333  B_ccc"</span>,
           <span class="st">"A_444  B_ddd"</span>,
           <span class="st">"A_555  B_eee"</span>)

pattern2 &lt;-<span class="st"> 'A_(?&lt;Part_A&gt;.*)  B_(?&lt;Part_B&gt;.*)'</span>

<span class="kw">regexp2df</span>(text2, pattern2)</code></pre></div>
<pre><code>#&gt;   Part_A Part_B
#&gt; 1    111    aaa
#&gt; 2    222    bbb
#&gt; 3    333    ccc
#&gt; 4    444    ddd
#&gt; 5    555    eee</code></pre>
<p><font color="red"><strong>Wrong!</strong></font> There must NOT be any SPACES in token’s name:</p>
<pre><code> patternX &lt;- 'A (?&lt;Part A&gt;.*)  B (?&lt;Part B&gt;.*)'
 regexp2df(text2, patternX)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">   <span class="co">#&gt; Error ...</span></code></pre></div>
<p>A more complicated example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">text3 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"sn555 ID_O20-5-684_N52_2_Subt2_01."</span>,
           <span class="st">"sn555 ID_O20-5-984_S52_8_Subt10_11."</span>)

pattern3 &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">'sn(?&lt;serial_number&gt;.*) '</span>,
                   <span class="st">'ID_(?&lt;ID&gt;.*)'</span>,
                   <span class="st">'_(?&lt;Class&gt;[NS])'</span>,
                   <span class="st">'(?&lt;Sector&gt;.*)'</span>,
                   <span class="st">'_(?&lt;Point&gt;.*)'</span>,
                   <span class="st">'_[Ss]ubt.*</span><span class="ch">\\</span><span class="st">.'</span>);
<span class="kw">cat</span>(pattern3)</code></pre></div>
<pre><code>#&gt; sn(?&lt;serial_number&gt;.*) ID_(?&lt;ID&gt;.*)_(?&lt;Class&gt;[NS])(?&lt;Sector&gt;.*)_(?&lt;Point&gt;.*)_[Ss]ubt.*\.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">regexp2df</span>(text3, pattern3)</code></pre></div>
<pre><code>#&gt;   serial_number        ID Class Sector Point
#&gt; 1           555 O20-5-684     N     52     2
#&gt; 2           555 O20-5-984     S     52     8</code></pre>
<p>List all .R files in your working directory:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"> <span class="kw">regexp2df</span>(<span class="kw">dir</span>(),<span class="st">'(?&lt;R_file&gt;.*</span><span class="ch">\\</span><span class="st">.[rR]$)'</span>)</code></pre></div>
<pre><code>#&gt;   c.NA..NA..NA..NA..NA..NA..NA..NA..NA.
#&gt; 1                                    NA
#&gt; 2                                    NA
#&gt; 3                                    NA
#&gt; 4                                    NA
#&gt; 5                                    NA
#&gt; 6                                    NA
#&gt; 7                                    NA
#&gt; 8                                    NA
#&gt; 9                                    NA</code></pre>
<p>Do the same by using chaining operator <code>%&gt;%</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"> <span class="kw">library</span>(dplyr)

 <span class="kw">dir</span>() %&gt;%<span class="st"> </span><span class="kw">regexp2df</span>(<span class="st">'(?&lt;R_file&gt;.*</span><span class="ch">\\</span><span class="st">.[rR]$)'</span>)</code></pre></div>
<pre><code>#&gt;   c.NA..NA..NA..NA..NA..NA..NA..NA..NA.
#&gt; 1                                    NA
#&gt; 2                                    NA
#&gt; 3                                    NA
#&gt; 4                                    NA
#&gt; 5                                    NA
#&gt; 6                                    NA
#&gt; 7                                    NA
#&gt; 8                                    NA
#&gt; 9                                    NA</code></pre>
<p>Capture several types of files:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"> expr &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">'(?&lt;R_file&gt;.*</span><span class="ch">\\</span><span class="st">.[rR]$)|'</span>,
                <span class="st">'(?&lt;Rmd_file&gt;.*</span><span class="ch">\\</span><span class="st">.[rR]md$)|'</span>,
                <span class="st">'(?&lt;HTML_file&gt;.*</span><span class="ch">\\</span><span class="st">.html$)'</span>)
 <span class="kw">dir</span>() %&gt;%<span class="st"> </span><span class="kw">regexp2df</span>(expr) </code></pre></div>
<pre><code>#&gt;   R_file                       Rmd_file                       HTML_file
#&gt; 1                                                            index.html
#&gt; 2                                             v1_spHelper_Plotting.html
#&gt; 3              v1_spHelper_Plotting.Rmd                                
#&gt; 4   &lt;NA&gt;                           &lt;NA&gt;                            &lt;NA&gt;
#&gt; 5                                                v2_Other_Examples.html
#&gt; 6                 v2_Other_Examples.Rmd                                
#&gt; 7                                       v3_Plotting_Examples_gg_hy.html
#&gt; 8        v3_Plotting_Examples_gg_hy.Rmd                                
#&gt; 9   &lt;NA&gt;                           &lt;NA&gt;                            &lt;NA&gt;</code></pre>
</div>
<div id="stratifiedfolds-createfolds2-and-foldtests" class="section level1">
<h1 class="hasAnchor">
<a href="#stratifiedfolds-createfolds2-and-foldtests" class="anchor"></a><code>stratifiedFolds</code>, <code>createFolds2</code> and <code>foldTests</code>
</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">clear</span>()

<span class="co"># Load data</span>
<span class="kw">data</span>(<span class="st">"DataSet1"</span>)

<span class="co"># Set parameters</span>
nFolds =<span class="st"> </span><span class="dv">5</span>

<span class="co"># Explore data</span>
<span class="kw">str</span>(DataSet1)</code></pre></div>
<pre><code>#&gt; 'data.frame':    40 obs. of  3 variables:
#&gt;  $ ID  : Factor w/ 20 levels "1","2","3","4",..: 1 1 2 2 3 3 4 4 5 5 ...
#&gt;  $ gr  : Factor w/ 4 levels "A","B","C","D": 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ .row: int  1 2 3 4 5 6 7 8 9 10 ...</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># table(DataSet1[,c("gr","ID")])</span>
<span class="co"># summary(DataSet1)</span></code></pre></div>
<p><code>createFolds2</code> and <code>stratifiedFolds</code> is the same function with different names</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">1</span>)
<span class="kw"><a href="../reference/cvo_create_folds.html">cvo_create_folds</a></span>(<span class="dt">block_by =</span> DataSet1$ID, <span class="dt">k =</span> nFolds)</code></pre></div>
<pre><code>#&gt; $Fold1
#&gt;  [1]  3  4  7  8  9 10 13 14 15 16 17 18 21 22 23 24 25 26 27 28 29 30 31
#&gt; [24] 32 33 34 35 36 37 38 39 40
#&gt; 
#&gt; $Fold2
#&gt;  [1]  1  2  3  4  5  6  9 10 11 12 13 14 15 16 19 20 21 22 25 26 27 28 29
#&gt; [24] 30 31 32 33 34 37 38 39 40
#&gt; 
#&gt; $Fold3
#&gt;  [1]  1  2  3  4  5  6  7  8 11 12 13 14 15 16 17 18 19 20 21 22 23 24 29
#&gt; [24] 30 31 32 33 34 35 36 37 38
#&gt; 
#&gt; $Fold4
#&gt;  [1]  1  2  5  6  7  8  9 10 11 12 15 16 17 18 19 20 21 22 23 24 25 26 27
#&gt; [24] 28 29 30 31 32 35 36 39 40
#&gt; 
#&gt; $Fold5
#&gt;  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 17 18 19 20 23 24 25 26 27
#&gt; [24] 28 33 34 35 36 37 38 39 40
#&gt; 
#&gt; attr(,"info")
#&gt;   indices stratified blocked cv_type k repetitions sample_size
#&gt; 1   Train      FALSE    TRUE  k-fold 5           1          40
#&gt; attr(,"seeds")
#&gt; [1] -4220844</code></pre>
<p>When variable names from data frame are provided:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Folds1_a &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cvo_create_folds.html">cvo_create_folds</a></span>(<span class="dt">data =</span> DataSet1,
                             <span class="dt">stratify_by =</span> <span class="st">"gr"</span>,
                             <span class="dt">block_by =</span> <span class="st">"ID"</span>,
                             nFolds,
                             <span class="dt">returnTrain =</span> <span class="ot">FALSE</span>)
<span class="co"># str(Folds1_a)</span>
<span class="kw"><a href="../reference/cvo_test_bs.html">cvo_test_bs</a></span>(Folds1_a,
            <span class="dt">stratify_by =</span> <span class="st">"gr"</span>,
            <span class="dt">block_by =</span> <span class="st">"ID"</span>,
            <span class="dt">data =</span> DataSet1)</code></pre></div>
<pre><code>#&gt; ************************************************************
#&gt; ____________________________________________________________
#&gt;                 Test for STRATIFICATION 
#&gt; 
#&gt;       A B C D      &lt;&lt;&lt;     &gt;&gt;&gt;              A    B    C    D
#&gt; Fold1 2 2 2 2  &lt;-Counts | Proportions-&gt;  0.25 0.25 0.25 0.25
#&gt; Fold2 2 2 2 2  &lt;-Counts | Proportions-&gt;  0.25 0.25 0.25 0.25
#&gt; Fold3 2 2 2 2  &lt;-Counts | Proportions-&gt;  0.25 0.25 0.25 0.25
#&gt; Fold4 2 2 2 2  &lt;-Counts | Proportions-&gt;  0.25 0.25 0.25 0.25
#&gt; Fold5 2 2 2 2  &lt;-Counts | Proportions-&gt;  0.25 0.25 0.25 0.25
#&gt; 
#&gt; If stratified, the proportions of each group in each fold
#&gt; (row) should be (approximately) equal and with no zero values.
#&gt; Test is not valid if data is blocked and number of cases in 
#&gt; each block differs significantly.
#&gt; ____________________________________________________________
#&gt;                 Test for BLOCKING: BLOCKED
#&gt; 
#&gt;       ID
#&gt;       1 2 3 4 5 6 7 8 9 10 ..
#&gt; Fold1 2 0 0 0 0 0 0 0 0  2 ..
#&gt; Fold2 0 0 2 0 0 2 0 0 0  0 ..
#&gt; Fold3 0 0 0 0 2 0 0 0 2  0 ..
#&gt; Fold4 0 2 0 0 0 0 0 2 0  0 ..
#&gt; Fold5 0 0 0 2 0 0 2 0 0  0 ..
#&gt; 
#&gt; Table shows number of observations in each fold.
#&gt; If blocked, the same ID appears just in one fold.
#&gt; 10 (of 20) first columns are displayed.
#&gt; ************************************************************</code></pre>
<p>When “free” variables are provided:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Folds1_b &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cvo_create_folds.html">cvo_create_folds</a></span>(<span class="dt">stratify_by =</span> DataSet1$gr,
                             <span class="dt">block_by =</span> DataSet1$ID,
                             <span class="dt">k =</span> nFolds,
                             <span class="dt">returnTrain =</span> <span class="ot">FALSE</span>)
<span class="co"># str(Folds1_b)</span>
<span class="kw"><a href="../reference/cvo_test_bs.html">cvo_test_bs</a></span>(Folds1_b,
            <span class="dt">stratify_by =</span> <span class="st">"gr"</span>,
            <span class="dt">block_by =</span> <span class="st">"ID"</span>,
            <span class="dt">data =</span> DataSet1
)</code></pre></div>
<pre><code>#&gt; ************************************************************
#&gt; ____________________________________________________________
#&gt;                 Test for STRATIFICATION 
#&gt; 
#&gt;       A B C D      &lt;&lt;&lt;     &gt;&gt;&gt;              A    B    C    D
#&gt; Fold1 2 2 2 2  &lt;-Counts | Proportions-&gt;  0.25 0.25 0.25 0.25
#&gt; Fold2 2 2 2 2  &lt;-Counts | Proportions-&gt;  0.25 0.25 0.25 0.25
#&gt; Fold3 2 2 2 2  &lt;-Counts | Proportions-&gt;  0.25 0.25 0.25 0.25
#&gt; Fold4 2 2 2 2  &lt;-Counts | Proportions-&gt;  0.25 0.25 0.25 0.25
#&gt; Fold5 2 2 2 2  &lt;-Counts | Proportions-&gt;  0.25 0.25 0.25 0.25
#&gt; 
#&gt; If stratified, the proportions of each group in each fold
#&gt; (row) should be (approximately) equal and with no zero values.
#&gt; Test is not valid if data is blocked and number of cases in 
#&gt; each block differs significantly.
#&gt; ____________________________________________________________
#&gt;                 Test for BLOCKING: BLOCKED
#&gt; 
#&gt;       ID
#&gt;       1 2 3 4 5 6 7 8 9 10 ..
#&gt; Fold1 0 0 2 0 0 2 0 0 0  0 ..
#&gt; Fold2 2 0 0 0 0 0 0 0 2  0 ..
#&gt; Fold3 0 2 0 0 0 0 0 2 0  0 ..
#&gt; Fold4 0 0 0 0 2 0 0 0 0  2 ..
#&gt; Fold5 0 0 0 2 0 0 2 0 0  0 ..
#&gt; 
#&gt; Table shows number of observations in each fold.
#&gt; If blocked, the same ID appears just in one fold.
#&gt; 10 (of 20) first columns are displayed.
#&gt; ************************************************************</code></pre>
<p>Not blocked but stratified:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Folds1_c &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cvo_create_folds.html">cvo_create_folds</a></span>(<span class="dt">stratify_by =</span> DataSet1$gr,
                             <span class="dt">k =</span> nFolds,
                             <span class="dt">returnTrain =</span> <span class="ot">FALSE</span>)
<span class="co"># str(Folds1_c)</span>
<span class="kw"><a href="../reference/cvo_test_bs.html">cvo_test_bs</a></span>(Folds1_c, 
            <span class="dt">stratify_by =</span> <span class="st">"gr"</span>,
            <span class="dt">block_by =</span> <span class="st">"ID"</span>,
            <span class="dt">data =</span> DataSet1)</code></pre></div>
<pre><code>#&gt; ************************************************************
#&gt; ____________________________________________________________
#&gt;                 Test for STRATIFICATION 
#&gt; 
#&gt;       A B C D      &lt;&lt;&lt;     &gt;&gt;&gt;              A    B    C    D
#&gt; Fold1 2 2 2 2  &lt;-Counts | Proportions-&gt;  0.25 0.25 0.25 0.25
#&gt; Fold2 2 2 2 2  &lt;-Counts | Proportions-&gt;  0.25 0.25 0.25 0.25
#&gt; Fold3 2 2 2 2  &lt;-Counts | Proportions-&gt;  0.25 0.25 0.25 0.25
#&gt; Fold4 2 2 2 2  &lt;-Counts | Proportions-&gt;  0.25 0.25 0.25 0.25
#&gt; Fold5 2 2 2 2  &lt;-Counts | Proportions-&gt;  0.25 0.25 0.25 0.25
#&gt; 
#&gt; If stratified, the proportions of each group in each fold
#&gt; (row) should be (approximately) equal and with no zero values.
#&gt; Test is not valid if data is blocked and number of cases in 
#&gt; each block differs significantly.
#&gt; ____________________________________________________________
#&gt;                 Test for BLOCKING: NOT BLOCKED
#&gt; 
#&gt;       ID
#&gt;       1 2 3 4 5 6 7 8 9 10 ..
#&gt; Fold1 0 0 1 0 1 0 1 0 1  0 ..
#&gt; Fold2 0 1 1 0 0 0 1 1 0  0 ..
#&gt; Fold3 2 0 0 0 0 2 0 0 0  0 ..
#&gt; Fold4 0 0 0 2 0 0 0 1 0  1 ..
#&gt; Fold5 0 1 0 0 1 0 0 0 1  1 ..
#&gt; 
#&gt; Table shows number of observations in each fold.
#&gt; If blocked, the same ID appears just in one fold.
#&gt; 10 (of 20) first columns are displayed.
#&gt; ************************************************************</code></pre>
<p>Blocked but not stratified:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Folds1_d &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cvo_create_folds.html">cvo_create_folds</a></span>(<span class="dt">block_by =</span> DataSet1$ID,
                             <span class="dt">k =</span> nFolds,
                             <span class="dt">returnTrain =</span> <span class="ot">FALSE</span>)
<span class="co"># str(Folds1_d)</span>
<span class="kw"><a href="../reference/cvo_test_bs.html">cvo_test_bs</a></span>(Folds1_d,
            <span class="dt">stratify_by =</span> <span class="st">"gr"</span>,
            <span class="dt">block_by =</span> <span class="st">"ID"</span>,
            DataSet1)</code></pre></div>
<pre><code>#&gt; ************************************************************
#&gt; ____________________________________________________________
#&gt;                 Test for STRATIFICATION 
#&gt; 
#&gt;       A B C D      &lt;&lt;&lt;     &gt;&gt;&gt;              A    B    C    D
#&gt; Fold1 2 2 4 0  &lt;-Counts | Proportions-&gt;  0.25 0.25 0.50 0.00
#&gt; Fold2 4 0 2 2  &lt;-Counts | Proportions-&gt;  0.50 0.00 0.25 0.25
#&gt; Fold3 2 2 0 4  &lt;-Counts | Proportions-&gt;  0.25 0.25 0.00 0.50
#&gt; Fold4 0 2 4 2  &lt;-Counts | Proportions-&gt;  0.00 0.25 0.50 0.25
#&gt; Fold5 2 4 0 2  &lt;-Counts | Proportions-&gt;  0.25 0.50 0.00 0.25
#&gt; 
#&gt; If stratified, the proportions of each group in each fold
#&gt; (row) should be (approximately) equal and with no zero values.
#&gt; Test is not valid if data is blocked and number of cases in 
#&gt; each block differs significantly.
#&gt; ____________________________________________________________
#&gt;                 Test for BLOCKING: BLOCKED
#&gt; 
#&gt;       ID
#&gt;       1 2 3 4 5 6 7 8 9 10 ..
#&gt; Fold1 2 0 0 0 0 0 0 2 0  0 ..
#&gt; Fold2 0 0 0 2 2 0 0 0 0  0 ..
#&gt; Fold3 0 0 2 0 0 0 2 0 0  0 ..
#&gt; Fold4 0 0 0 0 0 2 0 0 0  0 ..
#&gt; Fold5 0 2 0 0 0 0 0 0 2  2 ..
#&gt; 
#&gt; Table shows number of observations in each fold.
#&gt; If blocked, the same ID appears just in one fold.
#&gt; 10 (of 20) first columns are displayed.
#&gt; ************************************************************</code></pre>
</div>
<div id="which-in-family-functions" class="section level1">
<h1 class="hasAnchor">
<a href="#which-in-family-functions" class="anchor"></a><code>which.in</code> family functions</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">m1 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="ot">NA</span>, <span class="dv">5</span>, <span class="dv">5</span>)
m1</code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4] [,5]
#&gt; [1,]   NA   NA   NA   NA   NA
#&gt; [2,]   NA   NA   NA   NA   NA
#&gt; [3,]   NA   NA   NA   NA   NA
#&gt; [4,]   NA   NA   NA   NA   NA
#&gt; [5,]   NA   NA   NA   NA   NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">which.in.diag</span>(m1)</code></pre></div>
<pre><code>#&gt; [1]  1  7 13 19 25</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">m2 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="ot">NA</span>, <span class="dv">2</span>, <span class="dv">5</span>)
<span class="kw">which.in.diag</span>(m2)</code></pre></div>
<pre><code>#&gt; [1] 1 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># ================================</span>

<span class="kw">which.in</span>(diag,    m1)</code></pre></div>
<pre><code>#&gt; [1]  1  7 13 19 25</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">which.in</span>(offdiag, m1)</code></pre></div>
<pre><code>#&gt;  [1]  2  3  4  5  6  8  9 10 11 12 14 15 16 17 18 20 21 22 23 24</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">which.in</span>(col, m1, <span class="dt">col =</span> <span class="dv">2</span>)</code></pre></div>
<pre><code>#&gt; [1]  6  7  8  9 10</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">which.in</span>(row, m1, <span class="dt">row =</span> <span class="dv">2</span>)</code></pre></div>
<pre><code>#&gt; [1]  2  7 12 17 22</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">which.in</span>(trilow, m1)</code></pre></div>
<pre><code>#&gt;  [1]  2  3  4  5  8  9 10 14 15 20</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">which.in</span>(trilow, m1, <span class="dt">diag =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>#&gt;  [1]  1  2  3  4  5  7  8  9 10 13 14 15 19 20 25</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">which.in</span>(triupp, m1)</code></pre></div>
<pre><code>#&gt;  [1]  6 11 12 16 17 18 21 22 23 24</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># ================================</span>
 
r1 &lt;-<span class="st"> </span><span class="kw">which.in</span>(trilow, m1)
r2 &lt;-<span class="st"> </span><span class="kw">which.in.trilow</span>(m1)
<span class="kw">identical</span>(r1, r2)</code></pre></div>
<pre><code>#&gt; [1] TRUE</code></pre>
</div>
<div id="corr_vec2mat" class="section level1">
<h1 class="hasAnchor">
<a href="#corr_vec2mat" class="anchor"></a><code>corr_vec2mat</code>
</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># ------------------------------------------------------------</span>
<span class="co"># Example 1A: Vector into a matrix</span>

vector =<span class="st"> </span><span class="kw">c</span>(<span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>, <span class="fl">0.4</span>, <span class="fl">0.5</span>, <span class="fl">0.6</span>)
<span class="kw">corr_vec2mat</span>(vector)</code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]  1.0  0.1  0.2  0.3
#&gt; [2,]  0.1  1.0  0.4  0.5
#&gt; [3,]  0.2  0.4  1.0  0.6
#&gt; [4,]  0.3  0.5  0.6  1.0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># ------------------------------------------------------------</span>

 <span class="co"># Example 1B: Vector is transformed to a matrix by filling</span>
 <span class="co"># it column-wise:</span></code></pre></div>
<pre><code>   # In this example only the matrix elements of interest are shown""
   vector = c(0.1, 0.2, 0.3, 0.4, 0.5, 0.6)
  
    matrix =
         [,1] [,2] [,3] [,4]
    [1,]   .     .   .    .
    [2,]  0.1    .   .    .
    [3,]  0.2  0.4   .    .
    [4,]  0.3  0.5  0.6   .
  
  
  # Find similarity between 1A and 1B examples.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"> <span class="co"># ---------------------------------------------------------------------</span>
 <span class="co"># Example 2: inappropriate number of coefficients - warning appears</span>

 <span class="co"># corr_vec2mat(vector[1:5])</span>
    <span class="co">#&gt; Warning message:</span>
    <span class="co">#&gt; Only first 3 coefficient(s) out of 5 will be used to construct symmetric matrix with 3 rows.</span>

 <span class="co"># --------------------------------------------------------------------</span>
 <span class="co"># Example 3: ERROR appears - values of coeffs must be between [-1;1]</span>

 <span class="co"># corr_vec2mat(1:5)</span>
    <span class="co">#&gt; Error in corr_vec2mat(1:5) :</span>
    <span class="co">#&gt; All values in input vector must be between [-1 and 1]</span></code></pre></div>
</div>
<div id="getvarvalues" class="section level1">
<h1 class="hasAnchor">
<a href="#getvarvalues" class="anchor"></a>getVarValues</h1>
<p><font color="red" size="5"> This chapter is out of date and must be updated!!! </font></p>
<div id="example-1" class="section level2">
<h2 class="hasAnchor">
<a href="#example-1" class="anchor"></a>Example 1</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Data</span>
df  &lt;-<span class="st"> </span>mtcars[,<span class="kw">c</span>(<span class="st">"cyl"</span>,<span class="st">"gear"</span>)]

<span class="co">#  Function, that uses `getVarValues`:</span>
f1 &lt;-<span class="st"> </span>function(data, v1) { <span class="kw">getVarValues</span>(v1, data) }

<span class="co"># Returns values of `df$cyl`:</span>
<span class="kw">f1</span>(df, cyl)

<span class="kw">f1</span>(df, <span class="st">"cyl"</span>)

cyl &lt;-<span class="st"> "gear"</span>        <span class="co"># !!! Still values of `df$cyl`, not `df$gear`:</span>
<span class="kw">f1</span>(df, cyl)

<span class="co"># Returns values of `df$gear`:</span>
<span class="kw">f1</span>(df, gear)

<span class="co"># Returns values of vector `a`, as there is no variable `df$a`:</span>
a =<span class="st"> "cyl"</span>
<span class="kw">f1</span>(df, a)

var &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"My"</span>, <span class="st">"variable"</span>, <span class="st">"var"</span>)
<span class="kw">f1</span>(df, var)</code></pre></div>
</div>
<div id="example-2" class="section level2">
<h2 class="hasAnchor">
<a href="#example-2" class="anchor"></a>Example 2</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># A Data frame</span>
   df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">A =</span> <span class="st">"Values_A_(DATA.FRAME)"</span>,
                    <span class="dt">E =</span> <span class="st">"Values_E_(DATA.FRAME)"</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)

<span class="co"># Vectors</span>
   A &lt;-<span class="st"> "Values of the vector 'A'"</span>
   B &lt;-<span class="st"> "Values of the vector 'B'"</span>

<span class="co"># A call object `CALL`:</span>
    fun  &lt;-<span class="st"> </span>function(data, gr, ID) { <span class="kw">match.call</span>() }
    CALL &lt;-<span class="st"> </span><span class="kw">fun</span>(df, A, B)
    CALL

<span class="co"># Outputs of `getVarValues` -------------------------------------------------</span>

    <span class="kw">getVarValues</span>(<span class="dt">VAR =</span> gr, <span class="dt">DATA =</span> df, <span class="dt">CALL =</span> CALL)
    
    <span class="kw">getVarValues</span>(gr, df, CALL)
    
    <span class="kw">getVarValues</span>(A, df, CALL)
    
    <span class="kw">getVarValues</span>(B, df, CALL)</code></pre></div>
</div>
<div id="unexpected-results" class="section level2">
<h2 class="hasAnchor">
<a href="#unexpected-results" class="anchor"></a>Unexpected results</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">     <span class="kw">getVarValues</span>(ID, df, CALL) <span class="co"># `ID` found only in function's `fun` definition.</span>
                                <span class="co"># `df$ID` does not exist.</span>
    
     <span class="kw">getVarValues</span>(F, df, CALL) <span class="co"># `F` is a special variable: `F = FALSE`</span>
    
     <span class="kw">getVarValues</span>(c, df, CALL) <span class="co"># `c()` is a function.</span></code></pre></div>
<pre><code>    getVarValues(G, df, CALL) # ERROR, as neither variable `G` nor `df$G` exists.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"> <span class="co">#&gt;  Error in eval(expr, envir, enclos) : object 'G' not found</span></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#regular-expressions-regexp2df">Regular expressions <code>regexp2df</code></a></li>
      <li><a href="#stratifiedfolds-createfolds2-and-foldtests"><code>stratifiedFolds</code>, <code>createFolds2</code> and <code>foldTests</code></a></li>
      <li><a href="#which-in-family-functions"><code>which.in</code> family functions</a></li>
      <li><a href="#corr_vec2mat"><code>corr_vec2mat</code></a></li>
      <li>
<a href="#getvarvalues">getVarValues</a><ul class="nav nav-pills nav-stacked">
<li><a href="#example-1">Example 1</a></li>
      <li><a href="#example-2">Example 2</a></li>
      <li><a href="#unexpected-results">Unexpected results</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Vilmantas Gegzna.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
